# 通通锁蓝牙模块通信插件接口常见问题(3.0)

## 特别注意
**stopAllOperation在3.x版本中不再支持打断正在操作wx.createBLEConnection的接口，因此可能返回设备正在忙碌中，wx.createBLEConnection必须等待完成**  
**为降低wx.createBLEConnection引起的失败，蓝牙接口操作前需进行设备扫描定位，单台设备的首次蓝牙操作时间将延长**  
**插件将存储用户设备操作的历史记录，记录过多可能导致操作时间延长，请定期调用stopAllOperation接口以清除设备缓存**  

###### 1. 10036 搜索不到设备/10007 连接设备失败
  1. 设备不在扫描范围内，无法进行连接  
  2. 智能锁蓝牙信号不稳定或信号差，请靠近设备重新进行操作  
  3. 蓝牙广播频率低，扫描时未扫描到设备信号，可通过摸亮智能锁面板进行操作  
  4. 未初始化的智能锁需在摸亮面板后才可进行连接  
  5. 蓝牙网关仅在重新通电后3分钟内可被扫描并连接  
  6. 安卓13及其以上设备需打开系统位置服务方可搜索到设备  
  7. 部分安卓设备(小米、红米等系列)需打开“附近设备”权限方能正常开锁

###### 2. 11013 蓝牙正在操作中，请稍候再试
  设备正在操作中，不能进行其它接口调用
  1. 等待其它接口调用完成并返回后再次调用
  2. 调用stopAllOperations接口，强行断开所有蓝牙操作后重新操作
  **stopAllOperations不可打断正在操作wx.createBLEConnection的设备**

###### 3. DEMO引用时找不到API.js
  请检查引用时目录结构是否正确，正确导入时以project.config.json所在目录为根目录

###### 4. S503智能锁开锁时返回动态码错误问题
  3.0.2（离线版2.0.1）已修复，请修改插件版本号

###### 5. 10007/10003 连接设备失败/设备断开连接
  1. 设备连接失败，重新操作即可
  2. 参考10036解决方案  
  3. 可在操作接口前自行调用wx.closeBLEConnection接口断连一次

###### 6. 10033 数据发送失败
  1. 操作中设备断开连接，重新操作即可
  2. 在操作接口前自行调用wx.closeBLEConnection接口断连一次

###### 7. 11002 设备或平台不支持蓝牙功能调试
  1. 部分华为鸿蒙设备升级后无法启动蓝牙设备，打开系统设置->隐私->附近设备->微信->设置为允许后重新操作 

###### 8. 切换智能锁或设备长时间无法连接
  1. 重启系统蓝牙，等待15秒后重新操作
  2. 调用wx.closeBLEConnection断开上一次蓝牙连接后操作
  3. 重启蓝牙适配器后进行操作或调用stopAllOperations