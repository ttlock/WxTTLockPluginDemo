# 通通锁蓝牙模块通信插件接口常见问题(3.1.0)

## 阅读需知  
  当前文档使用插件版本为**3.1.0及其以上**，低版本常见问题请阅读[相关链接](#相关链接)  
  小程序插件不同版本支持的设备类型及功能不同，阅读前请先确认使用的插件版本号及设备类型  

## 常见问题及相关处理方案  
#### 1. 功能无法操作或接口返回不符合预期  
  1. 请检查插件版本是否正确  
    当前文档使用插件版本为**3.1.0及其以上**，低版本常见问题请阅读[相关链接](#相关链接)  
    小程序插件不同版本支持的设备类型及功能不同，阅读前请先确认使用的插件版本号及设备类型  

#### 2. 11013 蓝牙正在操作中，请稍候再试
 蓝牙操作为阻塞状态，当有接口正在操作且未返回时，不可进行其它蓝牙操作  
  1. 等待其它接口调用完成并返回后再次调用
  2. 调用stopAllOperations接口，强行停止所有蓝牙操作后重新操作
        **stopAllOperations不可打断正在操作wx.createBLEConnection的设备操作**, 3.1.0版本调用后将强制退出设备忙碌状态, 可调用其它蓝牙接口，但原有接口仍可能在超时后返回  
  3. 批量操作完成后及时调用finishOperations接口释放蓝牙资源  

#### 3. 10036 搜索不到设备，已停止搜索，请确认设备是否已在附近 / 10007 设备连接失败
  1. 设备不在扫描范围内，无法进行连接  
  2. 智能锁蓝牙信号不稳定或信号差，请靠近设备重新进行操作  
  3. 蓝牙广播频率低，扫描时未扫描到设备信号，可通过摸亮智能锁面板进行操作  
  4. 未初始化的智能锁需在摸亮面板后才可进行连接  
  5. 蓝牙网关仅在重新通电后3分钟内可被扫描并连接  
  6. 安卓13及其以上设备需打开系统位置服务方可搜索到设备  
  7. 部分安卓设备(小米、红米等系列)需打开“附近设备”权限方能正常开锁  

#### 4. DEMO引用时找不到API.js
  请检查引用时目录结构是否正确，正确导入时以project.config.json所在目录为根目录  

#### 5. 10033 数据发送失败  
  1. 操作中设备断开连接，重新操作即可  
  2. 批量操作完成后及时调用finishOperations接口释放蓝牙资源  

#### 6. 11002 蓝牙调试功能暂不支持 Mac 以外的平台
  1. 该插件不支持PC端调试  
  2. 部分华为鸿蒙设备升级后无法启动蓝牙设备，打开系统设置->隐私->附近设备->微信->设置为允许后重新操作  

#### 7. 切换智能锁或设备长时间无法连接  
  1. 重启系统蓝牙，等待15秒后重新操作  
  2. 调用stopAllOperations接口，强行停止所有蓝牙操作后重新操作
        **stopAllOperations不可打断正在操作wx.createBLEConnection的设备操作**, 3.1.0版本调用后将强制退出设备忙碌状态, 可调用其它蓝牙接口，但原有接口仍可能在超时后返回  
  3. 批量操作完成后及时调用finishOperations接口释放蓝牙资源  

#### 8. 查询/设置锁开关状态展示数据不正确  
  1. 3.1.0版本返回参数名称由enabled修改为enable，请检查使用参数是否正确  

## 相关链接  
  1. [集成方法](../../README.md)  
  2. [接口文档](./接口文档.md)  
  3. [版本更新说明](../版本更新说明.md)  
  4. [3.0版本常见问题及相关处理方法](../旧版本接口文档/常见问题v3.0.md)  
  5. [常见问题v1.x & v2.x](../旧版本接口文档/常见问题v1.x&v2.x.md)  